(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{574:function(t,e,r){"use strict";r.r(e);r(39),r(36),r(57),r(58),r(37),r(45);var n=r(75),o=r(6),c=r(25),l=(r(38),r(59),r(15),r(30)),d=r(22);function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach(function(e){Object(c.a)(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var m={computed:h(h(h({},Object(l.b)(["imageUrl","user"])),Object(l.b)("product",["cart"])),{},{total:function(){var t=this.cart.map(function(t){return t.unit_price*t.quantity});return t.length>=1?t.reduce(function(t,e){return t+e}):0}}),data:function(){return{dataItem:{},loggedUser:{}}},methods:{order:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){var r,o,c,l,f,details,h,m,v,O,data,x;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.cart.length,o=t.user.first_name,c=t.user.phone,l=t.user.location,f=t.user.email,details=t.user.details,h=t.total,m=Object(n.a)(t.cart),v=t.user.id,(O={name:o,phone:c,location:l,email:f,details:details,size:r,total:h,userId:v}).products=m.map(function(t){return t}),data={order:JSON.stringify(O)},e.prev=1,e.next=2,d.b.post("/api/order",data).then(function(e){console.log(e,"res"),e.data.state&&(t.$store.commit("product/resetCart"),t.$router.push("/success"))});case 2:e.next=4;break;case 3:e.prev=3,x=e.catch(1),console.log("error occured",x);case 4:case"end":return e.stop()}},e,null,[[1,3]])}))()}},created:function(){this.user&&(this.loggedUser=h(h({},this.loggedUser),this.user))}},v=r(14),component=Object(v.a)(m,function(){var t=this,e=t._self._c;return e("div",{staticClass:"container mx-auto md:px-48 px-2 lg:min-h-screen"},[e("div",{staticClass:"bg-white mt-6 p-3"},[t.cart.length>0?e("div",[e("div",{staticClass:"bg-blue-100 mt-6 border-t border-b border-blue-500 text-blue-700 px-4 py-3",attrs:{role:"alert"}},[e("div",{staticClass:"text-sm"},[t._v("\n          You have "+t._s(t.cart.length)+" item(s) in your Cart. You can checkout\n          "),e("nuxt-link",{staticClass:"ml-6 text-red-500",attrs:{to:"/cart"}},[t._v("Preview Cart")])],1)])]):t._e(),t._v(" "),e("div",{staticClass:"text-right mt-2 md:flex mb-3"},[e("nuxt-link",{staticClass:"bg-red-600 text-white py-1 px-2 rounded font-bold",attrs:{to:"/checkout"}},[t._v("\n        Instant Checkout\n      ")]),t._v(" "),e("nuxt-link",{staticClass:"ml-6 bg-blue-900 text-white py-1 px-2 rounded font-bold",attrs:{to:"/login"}},[t._v("\n        Login / Register\n      ")])],1)])])},[],!1,null,"99ec3220",null);e.default=component.exports}}]);