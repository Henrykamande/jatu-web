(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{422:function(e,t,n){var content=n(503);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(41).default)("15fd83ec",content,!0,{sourceMap:!1})},502:function(e,t,n){"use strict";n(422)},503:function(e,t,n){var r=n(40)(function(i){return i[1]});r.push([e.i,".container[data-v-6e5c5a23]{max-width:1200px}.input[data-v-6e5c5a23]{border-radius:.375rem;border-width:1px;width:100%;--tw-border-opacity:1;border-color:#d4d4d4;border-color:rgba(212,212,212,var(--tw-border-opacity,1));--tw-bg-opacity:1;background-color:#f5f5f5;background-color:rgba(245,245,245,var(--tw-bg-opacity,1));padding:.5rem 1rem;--tw-text-opacity:1;color:#262626;color:rgba(38,38,38,var(--tw-text-opacity,1))}.input[data-v-6e5c5a23]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),0 0 transparent;box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 transparent);--tw-ring-opacity:1;--tw-ring-color:rgba(34,197,94,var(--tw-ring-opacity,1))}",""]),r.locals={},e.exports=r},596:function(e,t,n){"use strict";n.r(t);n(78),n(36),n(59),n(15),n(39),n(57),n(58);var r=n(6),o=n(25),d=(n(37),n(122),n(45),n(38),n(30)),c=n(22),l=n(29),m=n(167),v=n(105);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){Object(o.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}l.c.add(m.c,m.h);var h={components:{FontAwesomeIcon:v.a},computed:x(x({},Object(d.b)(["imageUrl","user"])),{},{userSerialNo:function(){return this.user?this.user.serialNo:null}}),data:function(){return{equipments:[],loader:!1,errorMessage:"",showEditModal:!1,editedEquipment:{}}},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=1,e.fetchUserEquipments();case 1:case"end":return t.stop()}},t)}))()},methods:{fetchUserEquipments:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark(function t(){var n,data,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.userSerialNo){t.next=1;break}return e.errorMessage="No user serial number found.",t.abrupt("return");case 1:return e.loader=!0,t.prev=2,t.next=3,c.b.get("/api/list-equipment/fetched-by-userSerialNo/".concat(e.userSerialNo));case 3:n=t.sent,data=n.data,e.equipments=data.record||[],t.next=5;break;case 4:t.prev=4,r=t.catch(2),console.error("Failed to fetch equipment:",r),e.errorMessage="Failed to fetch equipment.";case 5:e.loader=!1;case 6:case"end":return t.stop()}},t,null,[[2,4]])}))()},handleImageUpload:function(e){var t=e.target.files[0];t&&(this.editedEquipment.imageFile=t)},validateForm:function(){var e=this;return["machineType","model","condition","pricing","mainUse"].every(function(t){return e.editedEquipment[t]&&""!==e.editedEquipment[t].trim()})},editEquipment:function(e){this.editedEquipment=x({},e),this.showEditModal=!0},saveEquipment:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.showConfirmModal=!1,e.isLoading=!0,t.prev=1,n=new FormData,Object.keys(e.editedEquipment).forEach(function(t){"imageFile"!==t&&null!==e.editedEquipment[t]&&n.append(t,e.editedEquipment[t])}),e.editedEquipment.imageFile&&n.append("image",e.editedEquipment.imageFile),t.next=2,c.b.put("/api/farm-equipments/update/".concat(e.editedEquipment._id),n,{headers:{"Content-Type":"multipart/form-data"}});case 2:t.sent,e.$toast.success("Equipment updated successfully!"),e.$router.push("/equipment"),t.next=4;break;case 3:t.prev=3,r=t.catch(1),console.error("Error updating equipment:",r),e.$toast.error("Error updating equipment. Please try again.");case 4:return t.prev=4,e.isLoading=!1,t.finish(4);case 5:case"end":return t.stop()}},t,null,[[1,3,4,5]])}))()},closeEditModal:function(){this.showEditModal=!1}}},w=(n(502),n(14)),component=Object(w.a)(h,function(){var e=this,t=e._self._c;return t("div",{staticClass:"container mx-auto px-4 md:px-20 py-8"},[t("div",{staticClass:"bg-white p-8 rounded-xl shadow-lg border border-gray-200"},[e._m(0),e._v(" "),e.loader?t("div",{staticClass:"text-green-600 mt-6 text-center"},[e._v("Loading your equipment...")]):e._e(),e._v(" "),e.errorMessage?t("div",{staticClass:"text-red-600 mt-6 text-center"},[e._v(e._s(e.errorMessage))]):e._e(),e._v(" "),e.equipments.length?t("div",{staticClass:"mt-8"},[t("h3",{staticClass:"text-2xl font-semibold text-gray-800 mb-4"},[e._v("Owned Equipment")]),e._v(" "),t("div",{staticClass:"grid md:grid-cols-2 gap-6"},e._l(e.equipments,function(n){return t("div",{key:n._id,staticClass:"p-6 bg-gray-50 rounded-lg shadow-md border transition-transform transform hover:scale-105"},[t("NuxtLink",{staticClass:"block",attrs:{to:"/equipment/".concat(n._id)}},[t("img",{staticClass:"rounded-lg w-full max-w-md object-cover shadow-md",attrs:{src:"".concat(e.imageUrl,"/uploads/projects/").concat(n.imageLink),alt:e.equipments.machineType}})]),e._v(" "),t("h3",{staticClass:"text-xl font-bold text-gray-900"},[e._v(e._s(n.machineType)+" - "+e._s(n.model))]),e._v(" "),t("p",{staticClass:"text-sm text-gray-700 mt-2"},[t("strong",[e._v("Condition:")]),e._v(" "+e._s(n.condition||"N/A"))]),e._v(" "),t("p",{staticClass:"text-sm text-gray-700 mt-2"},[t("strong",[e._v("Pricing:")]),e._v(" "+e._s(n.pricing||"N/A"))]),e._v(" "),t("p",{staticClass:"text-sm text-gray-700 mt-2"},[t("strong",[e._v("Main Use:")]),e._v(" "+e._s(n.mainUse||"N/A"))]),e._v(" "),t("div",{staticClass:"flex gap-4 mt-4"},[t("button",{staticClass:"px-6 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition flex items-center gap-2",on:{click:function(t){return e.editEquipment(n)}}},[t("font-awesome-icon",{staticClass:"w-5 h-5",attrs:{icon:["fas","pen"]}}),e._v(" "),t("span",[e._v("Edit")])],1),e._v(" "),t("button",{staticClass:"px-6 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition flex items-center gap-2",on:{click:function(t){return e.confirmDelete(n)}}},[t("font-awesome-icon",{staticClass:"w-5 h-5",attrs:{icon:["fas","trash"]}}),e._v(" "),t("span",[e._v("Delete")])],1)])],1)}),0)]):t("div",{staticClass:"text-gray-600 mt-6 text-center"},[e._v("No equipment listed yet.")]),e._v(" "),e.showEditModal?t("div",{staticClass:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"},[t("div",{staticClass:"bg-white p-6 rounded-lg shadow-lg text-center"},[t("h3",{staticClass:"text-xl font-semibold text-gray-800"},[e._v("Edit Equipment Details")]),e._v(" "),t("div",{staticClass:"container mx-auto px-4 py-8"},[t("div",{staticClass:"max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-6"},[t("h2",{staticClass:"text-2xl font-bold text-gray-800 mb-6"},[e._v("Edit Equipment")]),e._v(" "),t("form",{on:{submit:function(t){return t.preventDefault(),e.confirmSave.apply(null,arguments)}}},[t("div",{staticClass:"grid grid-cols-1 md:grid-cols-2 gap-6"},[t("div",{staticClass:"flex flex-col"},[t("label",{staticClass:"mb-2 font-bold text-gray-700"},[e._v("Machine Type")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.editedEquipment.machineType,expression:"editedEquipment.machineType"}],staticClass:"input",attrs:{type:"text",required:""},domProps:{value:e.editedEquipment.machineType},on:{input:function(t){t.target.composing||e.$set(e.editedEquipment,"machineType",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"flex flex-col"},[t("label",{staticClass:"mb-2 font-bold text-gray-700"},[e._v("Model")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.editedEquipment.model,expression:"editedEquipment.model"}],staticClass:"input",attrs:{type:"text",required:""},domProps:{value:e.editedEquipment.model},on:{input:function(t){t.target.composing||e.$set(e.editedEquipment,"model",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"flex flex-col"},[t("label",{staticClass:"mb-2 font-bold text-gray-700"},[e._v("Machine status (current condition)")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.editedEquipment.condition,expression:"editedEquipment.condition"}],staticClass:"input",attrs:{required:""},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.editedEquipment,"condition",t.target.multiple?n:n[0])}}},[t("option",{attrs:{disabled:"",value:""}},[e._v("Select condition")]),e._v(" "),t("option",[e._v("Brand new")]),e._v(" "),t("option",[e._v("Slightly used")]),e._v(" "),t("option",[e._v("Used over a season")]),e._v(" "),t("option",[e._v("Need a small service and maintenance")]),e._v(" "),t("option",[e._v("Needs heavy service and repair before use")])])]),e._v(" "),t("div",{staticClass:"flex flex-col"},[t("label",{staticClass:"mb-2 font-bold text-gray-700"},[e._v("Pricing")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.editedEquipment.pricing,expression:"editedEquipment.pricing"}],staticClass:"input",attrs:{type:"text",required:""},domProps:{value:e.editedEquipment.pricing},on:{input:function(t){t.target.composing||e.$set(e.editedEquipment,"pricing",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"flex flex-col"},[t("label",{staticClass:"mb-2 font-bold text-gray-700"},[e._v("Main Use")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.editedEquipment.mainUse,expression:"editedEquipment.mainUse"}],staticClass:"input",attrs:{type:"text",required:""},domProps:{value:e.editedEquipment.mainUse},on:{input:function(t){t.target.composing||e.$set(e.editedEquipment,"mainUse",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"flex flex-col"},[t("label",{staticClass:"mb-2 font-bold text-gray-700"},[e._v("Equipment Image")]),e._v(" "),t("input",{staticClass:"w-full cursor-pointer rounded-md shadow px-4 py-3 text-gray-700 focus:outline-none focus:ring file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-orange-500 file:text-white hover:file:bg-orange-600",attrs:{accept:"image/*",type:"file"},on:{change:e.handleImageUpload}}),e._v(" "),e.editedEquipment.imageLink?t("div",{staticClass:"mt-4"},[t("img",{staticClass:"w-32 h-32 object-cover rounded-md shadow-md",attrs:{src:"".concat(e.imageUrl,"/uploads/projects/").concat(e.editedEquipment.imageLink),alt:e.editedEquipment.machineType}})]):e._e()])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.formError,expression:"formError"}],staticClass:"mt-6"},[t("div",{staticClass:"bg-red-500 text-white font-bold rounded-t-md px-4 py-2"},[e._v("\n          Please fill all the required fields\n        ")])]),e._v(" "),t("div",{staticClass:"flex gap-4 mt-8"},[t("button",{staticClass:"btn bg-green-500 hover:bg-green-600",attrs:{type:"submit",disabled:e.isLoading}},[t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","save"]}}),e._v(" \n          "+e._s(e.isLoading?"Saving...":"Save Changes")+"\n        ")],1),e._v(" "),t("button",{staticClass:"btn bg-gray-400 hover:bg-gray-500",attrs:{type:"button"},on:{click:e.cancelEdit}},[t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","times-circle"]}}),e._v(" \n          Cancel\n        ")],1)])])]),e._v(" "),e.showConfirmModal?t("div",{staticClass:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},[t("div",{staticClass:"bg-white p-6 rounded-lg shadow-lg w-96 text-center"},[t("h3",{staticClass:"text-xl font-semibold text-gray-800"},[e._v("Confirm Changes")]),e._v(" "),t("p",{staticClass:"text-gray-700 mt-2"},[e._v("Are you sure you want to update this equipment?")]),e._v(" "),t("div",{staticClass:"flex gap-4 mt-6 justify-center"},[t("button",{staticClass:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600",on:{click:e.saveEquipment}},[e._v("\n          Yes, Update\n        ")]),e._v(" "),t("button",{staticClass:"px-4 py-2 bg-gray-400 text-white rounded-md hover:bg-gray-500",on:{click:e.closeConfirmModal}},[e._v("\n          Cancel\n        ")])])])]):e._e()])])]):e._e()])])},[function(){var e=this,t=e._self._c;return t("div",{staticClass:"bg-gradient-to-r from-green-500 to-green-700 text-white py-6 px-6 rounded-md shadow-lg flex justify-between items-center"},[t("div",[t("h2",{staticClass:"text-3xl font-bold"},[e._v("Listed Equipment")]),e._v(" "),t("p",{staticClass:"text-sm opacity-90"},[e._v("Manage, edit, or remove your registered equipment.")])])])}],!1,null,"6e5c5a23",null);t.default=component.exports}}]);