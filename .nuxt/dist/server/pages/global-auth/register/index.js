exports.ids = [51];
exports.modules = {

/***/ 248:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/vue-loader/lib/loaders/templateLoader.js??ref--6!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./pages/global-auth/register/index.vue?vue&type=template&id=dec641d8&scoped=true
var render = function render() {
  var _vm = this,
    _c = _vm._self._c;
  return _c('div', {
    staticClass: "container mx-auto md:px-48 px-4 lg:min-h-screen"
  }, [_vm._ssrNode("<h2 class=\"text-center font-bold mt-6 text-3xl text-green-600\" data-v-dec641d8>Welcome to Jubilant Afro Farms</h2> "), _vm._ssrNode("<div class=\"bg-white p-6 border border-green-300 rounded-lg shadow-lg\" data-v-dec641d8>", "</div>", [_vm._ssrNode("<h3 class=\"py-4 font-bold text-2xl text-green-600\" data-v-dec641d8>Create An Account</h3> <div class=\"grid md:grid-cols-2 gap-6\" data-v-dec641d8><div data-v-dec641d8><label class=\"block mb-2 font-semibold text-green-600\" data-v-dec641d8>First Name *</label> <input type=\"text\" placeholder=\"First name\"" + _vm._ssrAttr("value", _vm.dataItem.first_name) + " class=\"border border-green-400 py-2 px-4 rounded-md outline-none focus:border-purple-500 w-full text-green-600\" data-v-dec641d8></div> <div data-v-dec641d8><label class=\"block mb-2 font-semibold text-green-600\" data-v-dec641d8>Last Name *</label> <input type=\"text\" placeholder=\"Last name\"" + _vm._ssrAttr("value", _vm.dataItem.last_name) + " class=\"border border-green-400 py-2 px-4 rounded-md outline-none focus:border-purple-500 w-full text-green-600\" data-v-dec641d8></div></div> <div class=\"grid md:grid-cols-2 gap-6 mt-4\" data-v-dec641d8><div data-v-dec641d8><label class=\"block mb-2 font-semibold text-green-600\" data-v-dec641d8>Email *</label> <input type=\"text\" placeholder=\"example@gmail.com\"" + _vm._ssrAttr("value", _vm.dataItem.email) + " class=\"border border-green-400 py-2 px-4 rounded-md outline-none focus:border-purple-500 w-full text-green-600\" data-v-dec641d8></div> <div data-v-dec641d8><label class=\"block mb-2 font-semibold text-green-600\" data-v-dec641d8>Phone Number *</label> <input type=\"text\" placeholder=\"+254798765432\"" + _vm._ssrAttr("value", _vm.dataItem.phone) + " class=\"border border-green-400 py-2 px-4 rounded-md outline-none focus:border-purple-500 w-full text-green-600\" data-v-dec641d8></div></div> <div class=\"grid md:grid-cols-2 gap-6 mt-4\" data-v-dec641d8><div data-v-dec641d8><label class=\"block mb-2 font-semibold text-green-600\" data-v-dec641d8>Location *</label> <input type=\"text\" placeholder=\"Location\"" + _vm._ssrAttr("value", _vm.dataItem.location) + " class=\"border border-green-400 py-2 px-4 rounded-md outline-none focus:border-purple-500 w-full text-green-600\" data-v-dec641d8></div> <div data-v-dec641d8><label class=\"block mb-2 font-semibold text-green-600\" data-v-dec641d8>House No</label> <input type=\"text\" placeholder=\"House no\"" + _vm._ssrAttr("value", _vm.dataItem.house) + " class=\"border border-green-400 py-2 px-4 rounded-md outline-none focus:border-purple-500 w-full text-green-600\" data-v-dec641d8></div></div> <div class=\"grid md:grid-cols-2 gap-6 mt-4\" data-v-dec641d8><div data-v-dec641d8><label class=\"block mb-2 font-semibold text-green-600\" data-v-dec641d8>Password *</label> <input type=\"password\" placeholder=\"Your password\"" + _vm._ssrAttr("value", _vm.dataItem.password) + " class=\"border border-green-400 py-2 px-4 rounded-md outline-none focus:border-purple-500 w-full text-green-600\" data-v-dec641d8></div> <div data-v-dec641d8><label class=\"block mb-2 font-semibold text-green-600\" data-v-dec641d8>Confirm Password *</label> <input type=\"password\" placeholder=\"Confirm your password\"" + _vm._ssrAttr("value", _vm.dataItem.confirm_password) + " class=\"border border-green-400 py-2 px-4 rounded-md outline-none focus:border-purple-500 w-full text-green-600\" data-v-dec641d8></div></div> "), _vm._ssrNode("<div class=\"flex flex-col items-center mt-6\" data-v-dec641d8>", "</div>", [_vm._ssrNode("<button" + _vm._ssrAttr("loading", _vm.loader) + " class=\"bg-orange-600 text-white py-2 px-6 rounded-md font-bold shadow-md hover:bg-orange-700 transition\" data-v-dec641d8>\n        Register\n      </button> <img" + _vm._ssrAttr("src", __webpack_require__(89)) + " alt class=\"mt-4\"" + _vm._ssrStyle({
    "width": "30px",
    "height": "30px"
  }, null, {
    display: _vm.loader ? '' : 'none'
  }) + " data-v-dec641d8> "), _vm._ssrNode("<div class=\"flex py-3\" data-v-dec641d8>", "</div>", [_vm._ssrNode("<span class=\"text-orange-500\" data-v-dec641d8>Already have an account?</span> "), _c('nuxt-link', {
    attrs: {
      "to": "/global-auth/login"
    }
  }, [_c('button', {
    staticClass: "text-blue-700 underline ml-2"
  }, [_vm._v("Login")])])], 2)], 2)], 2)], 2);
};
var staticRenderFns = [];

// CONCATENATED MODULE: ./pages/global-auth/register/index.vue?vue&type=template&id=dec641d8&scoped=true

// EXTERNAL MODULE: external "vuex"
var external_vuex_ = __webpack_require__(4);

// EXTERNAL MODULE: ./common/index.js
var common = __webpack_require__(3);

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./pages/global-auth/register/index.vue?vue&type=script&lang=js


const {
  toast
} = __webpack_require__(57);
/* harmony default export */ var registervue_type_script_lang_js = ({
  computed: {
    ...Object(external_vuex_["mapGetters"])("product", ["cart"]),
    dynamicUrl() {
      return this.$route.params.url;
    }
  },
  data() {
    return {
      dataItem: {},
      loader: false,
      successMsg: false,
      emailError: false,
      formError: false
    };
  },
  methods: {
    generateRandomString() {
      return Math.random().toString(36).substring(7);
    },
    async register() {
      this.dataItem.serialNo = 'user' + this.generateRandomString();
      const details = this.dataItem;
      // const pageUrl = this.$route.params.url;

      if (!details.first_name || !details.last_name || !details.email || !details.phone) {
        toast().danger("‚ö†Ô∏è Attention!", "All required fields must be completed.").with({
          shape: "rounded",
          duration: 4000,
          speed: 700,
          positionX: "center",
          positionY: "top",
          color: "bg-red-700",
          fontColor: "white",
          fontTone: 100,
          shadow: true,
          opacity: 90,
          icon: "warning"
        }).show();
        return;
      }
      try {
        const url = `/api/users`;
        this.loader = true;
        const response = await common["b" /* http */].post(url, details);
        if (!response.data.state) {
          // Show error toast based on the API response message
          toast().danger("‚ö†Ô∏è Attention!", response.data.msg).with({
            shape: "rounded",
            duration: 4000,
            speed: 700,
            positionX: "center",
            positionY: "top",
            color: "bg-red-700",
            fontColor: "white",
            fontTone: 100,
            shadow: true,
            opacity: 90,
            icon: "warning"
          }).show();
          this.loader = false;
          return;
        }

        // Registration successful
        const data = response.data;
        this.successMsg = true;
        this.loader = false;
        this.dataItem = {};
        this.$store.commit("setUser", data.user);
        this.$store.commit("setToken", data.token);
        localStorage.setItem("token", data.token);
        localStorage.setItem("user", JSON.stringify(data.user));
        toast().success("üéâ Welcome!", "You have successfully registered.").with({
          shape: "rounded",
          duration: 4000,
          speed: 800,
          positionX: "center",
          positionY: "top",
          color: "bg-green-600",
          fontColor: "white",
          fontTone: 100,
          shadow: true,
          opacity: 85,
          icon: "check-circle"
        }).show();

        // Redirect user
        this.$router.push("/");
      } catch (err) {
        toast().danger("Server Error", "An unexpected error occurred. Please try again.").with({
          shape: "square",
          duration: 3000,
          speed: 1000,
          positionX: "end",
          positionY: "top",
          color: "bg-red-500",
          fontColor: "white",
          fontTone: 200
        }).show();
      }
    }
  }
});
// CONCATENATED MODULE: ./pages/global-auth/register/index.vue?vue&type=script&lang=js
 /* harmony default export */ var global_auth_registervue_type_script_lang_js = (registervue_type_script_lang_js); 
// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__(1);

// CONCATENATED MODULE: ./pages/global-auth/register/index.vue



function injectStyles (context) {
  
  
}

/* normalize component */

var component = Object(componentNormalizer["a" /* default */])(
  global_auth_registervue_type_script_lang_js,
  render,
  staticRenderFns,
  false,
  injectStyles,
  "dec641d8",
  "28dc22f3"
  
)

/* harmony default export */ var register = __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ 89:
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "img/loader.3f25900.gif";

/***/ })

};;
//# sourceMappingURL=index.js.map