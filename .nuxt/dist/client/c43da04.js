(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{554:function(e,t,r){"use strict";r.r(t);r(38),r(35),r(57),r(58),r(36),r(44);var o=r(74),n=r(6),l=r(24),d=(r(37),r(59),r(16),r(29)),c=r(21);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){Object(l.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var f={computed:v(v(v({},Object(d.b)(["imageUrl","user"])),Object(d.b)("product",["cart"])),{},{total:function(){var e=this.cart.map(function(e){return e.unit_price*e.quantity});return e.length>=1?e.reduce(function(e,t){return e+t}):0}}),data:function(){return{dataItem:{},loggedUser:{},paymentMode:null,formError:!1}},methods:{order:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark(function t(){var r,n,l,d,m,details,v,f,y,_,h,data,x;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.cart.length,n=e.loggedUser.first_name,l=e.loggedUser.phone,d=e.loggedUser.location,m=e.loggedUser.email,details=e.loggedUser.details,v=e.paymentMode,f=e.total,y=Object(o.a)(e.cart),_=e.loggedUser._id,(h={name:n,phone:l,location:d,email:m,details:details,size:r,total:f,userId:_,paymentMode:v}).products=y.map(function(e){return e}),data={order:JSON.stringify(h)},null!=e.loggedUser.first_name&&null!=e.loggedUser.phone&&null!=e.loggedUser.location){t.next=1;break}e.formError=!0,t.next=4;break;case 1:return t.prev=1,t.next=2,c.b.post("/api/order",data).then(function(t){console.log(t,"res"),t.data.state&&(e.$store.commit("product/resetCart"),e.$router.push("/success"))});case 2:t.next=4;break;case 3:t.prev=3,x=t.catch(1),console.log("error occured",x);case 4:case"end":return t.stop()}},t,null,[[1,3]])}))()}},created:function(){this.user&&(this.loggedUser=v(v({},this.loggedUser),this.user))}},y=r(14),component=Object(y.a)(f,function(){var e=this,t=e._self._c;return t("div",{staticClass:"container mx-auto md:px-48 px-2 lg:min-h-screen"},[t("div",{staticClass:"bg-white mt-6 p-3"},[e.cart.length>0?t("div",[t("div",{staticClass:"bg-blue-100 mt-6 border-t border-b border-blue-500 text-blue-700 px-4 py-3 md:flex justify-between",attrs:{role:"alert"}},[t("div",{staticClass:"text-sm"},[e._v("\n          You have "+e._s(e.cart.length)+" item(s) in your Cart. You can checkout\n          "),t("nuxt-link",{staticClass:"ml-6 text-red-500",attrs:{to:"/cart"}},[e._v("Preview Cart")])],1),e._v(" "),t("div",[t("nuxt-link",{staticClass:"md:ml-6 md:mt-0 mt-2 bg-blue-900 text-white py-1 px-2 rounded font-bold",attrs:{to:"/login"}},[e._v("\n            Login\n          ")])],1)])]):e._e(),e._v(" "),t("div",{staticClass:"grid md:grid-cols-2 gap-4"},[t("div",[t("label",{staticClass:"block mb-2 font-bold"},[e._v("First Name *")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.loggedUser.first_name,expression:"loggedUser.first_name"}],staticClass:"border-2 border-gray-400 py-1 px-3 rounded outline-none focus:border-purple-500 w-full",attrs:{type:"text"},domProps:{value:e.loggedUser.first_name},on:{input:function(t){t.target.composing||e.$set(e.loggedUser,"first_name",t.target.value)}}})]),e._v(" "),t("div",[t("label",{staticClass:"block mb-2 font-bold"},[e._v("Last Name *")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.loggedUser.last_name,expression:"loggedUser.last_name"}],staticClass:"border-2 border-gray-400 py-1 px-3 rounded outline-none focus:border-purple-500 w-full",attrs:{type:"text"},domProps:{value:e.loggedUser.last_name},on:{input:function(t){t.target.composing||e.$set(e.loggedUser,"last_name",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"grid md:grid-cols-2 gap-4"},[t("div",[t("label",{staticClass:"block mb-2 font-bold"},[e._v("Email")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.loggedUser.email,expression:"loggedUser.email"}],staticClass:"border-2 border-gray-400 py-1 px-3 rounded outline-none focus:border-purple-500 w-full",attrs:{type:"text"},domProps:{value:e.loggedUser.email},on:{input:function(t){t.target.composing||e.$set(e.loggedUser,"email",t.target.value)}}})]),e._v(" "),t("div",[t("label",{staticClass:"block mb-2 font-bold"},[e._v("Phone Number *")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.loggedUser.phone,expression:"loggedUser.phone"}],staticClass:"border-2 border-gray-400 py-1 px-3 rounded outline-none focus:border-purple-500 w-full",attrs:{type:"text"},domProps:{value:e.loggedUser.phone},on:{input:function(t){t.target.composing||e.$set(e.loggedUser,"phone",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"grid md:grid-cols-2 gap-4"},[t("div",[t("label",{staticClass:"block mb-2 font-bold"},[e._v("Location *")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.loggedUser.location,expression:"loggedUser.location"}],staticClass:"border-2 border-gray-400 py-1 px-3 rounded outline-none focus:border-purple-500 w-full",attrs:{type:"text"},domProps:{value:e.loggedUser.location},on:{input:function(t){t.target.composing||e.$set(e.loggedUser,"location",t.target.value)}}})]),e._v(" "),t("div",[t("label",{staticClass:"block mb-2 font-bold"},[e._v("House No")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.loggedUser.house,expression:"loggedUser.house"}],staticClass:"border-2 border-gray-400 py-1 px-3 rounded outline-none focus:border-purple-500 w-full",attrs:{type:"text"},domProps:{value:e.loggedUser.house},on:{input:function(t){t.target.composing||e.$set(e.loggedUser,"house",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"grid grid-cols-2 gap-4 mt-3"},[t("div",{staticClass:"col-span-2"},[t("label",{staticClass:"block mb-2 font-bold"},[e._v("Instructions")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.loggedUser.details,expression:"loggedUser.details"}],staticClass:"border-2 border-gray-400 focus:border-blue-400 rounded p-2 m-1 w-full",attrs:{name:"details"},domProps:{value:e.loggedUser.details},on:{input:function(t){t.target.composing||e.$set(e.loggedUser,"details",t.target.value)}}})])]),e._v(" "),t("div",{staticClass:"block"},[t("span",{staticClass:"text-gray-700"},[e._v("Mode of Payment")]),e._v(" "),t("div",{staticClass:"mt-2"},[t("div",[t("label",{staticClass:"inline-flex items-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.paymentMode,expression:"paymentMode"}],staticClass:"form-radio",attrs:{type:"radio",name:"paymentMode",value:"Mpesa on Delivery"},domProps:{checked:e._q(e.paymentMode,"Mpesa on Delivery")},on:{change:function(t){e.paymentMode="Mpesa on Delivery"}}}),e._v(" "),t("span",{staticClass:"ml-2"},[e._v("MPESA on Delivery")])])]),e._v(" "),t("div",[t("label",{staticClass:"inline-flex items-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.paymentMode,expression:"paymentMode"}],staticClass:"form-radio",attrs:{type:"radio",name:"paymentMode",value:"3"},domProps:{checked:e._q(e.paymentMode,"3")},on:{change:function(t){e.paymentMode="3"}}}),e._v(" "),t("span",{staticClass:"ml-2"},[e._v("Swipe Card on Delivery")])])])])]),e._v(" "),t("div",{staticClass:"text-right"},[t("button",{staticClass:"bg-red-600 text-white py-1 px-2 rounded font-bold",on:{click:e.order}},[e._v("\n        Place Your Order\n      ")])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.formError,expression:"formError"}],staticClass:"mt-2",attrs:{role:"alert"}},[t("div",{staticClass:"bg-red-500 text-white font-bold rounded-t px-4 py-2"},[e._v("\n        Please fill all the required fields\n      ")]),e._v(" "),e._m(0)])])])},[function(){var e=this._self._c;return e("div",{staticClass:"border border-t-0 border-red-400 rounded-b bg-red-100 px-4 py-3 text-red-700"},[e("p",[this._v("First Name, Last Name, Phone and Location are mandatory")])])}],!1,null,"15679f8a",null);t.default=component.exports}}]);